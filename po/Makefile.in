#
# Copyright (C) 2004 Red Hat, Inc. All rights reserved.
#
# This file is part of LVM2.
#
# This copyrighted material is made available to anyone wishing to use,
# modify, copy, or redistribute it subject to the terms and conditions
# of the GNU General Public License v.2.
#
# You should have received a copy of the GNU General Public License
# along with this program; if not, write to the Free Software Foundation,
# Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA

srcdir = @srcdir@
top_srcdir = @top_srcdir@
top_builddir = @top_builddir@

LANGS=de

#TARGETS=$(LANGS:%=lvm2_%.mo) $(LANGS:%=dm_%.mo)

DM_POSOURCES = $(top_builddir)/libdm/dm-tools/dmsetup.pot $(top_builddir)/libdm/*.pot \
	       $(top_builddir)/libdm/*/*.pot

LVM_POSOURCES = $(top_builddir)/tools/*.pot $(top_builddir)/lib/*/*.pot

XGETTEXT_FLAGS = -C -F --no-git --add-location=file \
	--keyword=log_debug --keyword=log_info --keyword=log_notice \
	--keyword=log_warn --keyword=log_err --keyword=log_fatal \
	--keyword=log_error --keyword=log_print --keyword=log_verbose \
	--keyword=log_very_verbose --keyword=_ --keyword=N_ \
	-d -

include $(top_builddir)/make.tmpl

lvm2.po: Makefile $(LVM_POSOURCES)
	@echo Compiling string table
	@xgettext $(XGETTEXT_FLAGS) --keyword=print_log $(LVM_POSOURCES) > $@

libdm.po: Makefile $(DM_POSOURCES)
	@echo Compiling string table
	@xgettext $(XGETTEXT_FLAGS) --keyword=dm_log $(DM_POSOURCES) > $@

DOMAINS = lvm2 libdm

pofile: $(DOMAINS:%=%.po)

install: $(TARGETS)
	@echo Installing translation files in $(localedir)
	$(foreach lang,$(LANGS),\
		$(foreach domain,$(DOMAINS),\
			$(INSTALL_DATA) -D $(lang).mo \
				$(localedir)/$(lang)/LC_MESSAGES/$(domain).mo ;))
